@model SipServer.Models.DPager<SipServer.DBModel.TDeviceInfo>

@{
    ViewData["Title"] = "已注册设备列表";
}

<h1>
    已注册设备
</h1>
<h3>
    @Html.ActionLink("仅在线", "Index", new { onlyOnline = true }) |
    @Html.ActionLink("所有", "Index", new { onlyOnline = false })
</h3>

<table class="table">
    <thead>
        <tr>
            <th>
                设备ID
            </th>
            <th>
                目标设备/区域/系统的名称
            </th>
            <th>
                设备生产商
            </th>
            <th>
                设备型号
            </th>
            <th>
                设备固件版本
            </th>
            <th>
                通道数
            </th>
            <th>
                在线状态
            </th>
            <th>
                创建时间
            </th>
            <th>
                上线时间
            </th>
            <th>
                最后通信时间
            </th>
            <th>
                上次离线时间
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.list)
        {
            <tr>
                <td>
                    @Html.ActionLink(item.DeviceId, "Channels", new { DeviceID = item.DeviceId })
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DeviceName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Manufacturer)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Model)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Firmware)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CatalogChannel)
                    @if (item.Online)
                    {
                        <br />
                        @Html.ActionLink("刷新", "RefreshChannel", new { DeviceID = item.DeviceId })
                    }
                </td>
                <td>
                    @(item.Online ? item.RemoteInfo : "离线")
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CreateTime)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.OnlineTime)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.KeepAliveTime)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.OfflineTime)
                </td>
                <td>
                    @Html.ActionLink("删除", "Delete", new { DeviceId = item.DeviceId })
                </td>
            </tr>
        }
    </tbody>
</table>
